@model Sensor

@{
    ViewData["Title"] = "Sensor Details";
}

<h1>Sensor Details</h1>
<hr />

<div>
    <h4>@Model.SensorName</h4>
    <p><strong>Location:</strong> @Model.LocationName</p>
    <p><strong>Coordinates:</strong> @Model.Latitude, @Model.Longitude</p>
</div>

<div id="map" style="height: 500px; border: 1px solid #ccc; margin-bottom: 20px;"></div>

<div>
    <a asp-action="Edit" asp-route-id="@Model.SensorId" class="btn btn-warning">Edit</a>
    <a asp-action="Index" class="btn btn-secondary">Back to List</a>
</div>

@section Scripts {
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

    <script>
        const lat = parseFloat('@Model.Latitude');
        const lng = parseFloat('@Model.Longitude');

        const map = L.map('map').setView([lat, lng], 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        L.marker([lat, lng]).addTo(map)
            .bindPopup('📍 @Model.SensorName')
            .openPopup();
    </script>
}
